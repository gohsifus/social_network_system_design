# System Design социальной сети для курса по System Design
<hr>
<a href="https://balun.courses/courses/system_design">Ссылка на курс</a>
<hr>

## Формализованные требования

### Функциональные требования:
* Должна быть лента с публикациями 
* Пост в ленте может состоять из текста, картинок и геометки
* Под постами должна быть возможность поставить оценку (лайк/дизлайк) 
* Под постами должна быть возможность написать комментарий
* Возможность подписаться на пользователя и следить за его публикациями
* Должна быть страница пользователя с его публикациями и основной информацией
* Страница с топами самых популярных мест (по странам/ по городам)
* Общение с другими пользователями в личных сообщениях
* Аутентификация пользователя

### Нефункциональные требования
* Максимальный размер картинки - 500кб
* Максимальное количество картинок в посте - 5
* Максимальное количество символов в посте - 1000
* Максимальное количество символов в комментариях к посту - 200
* В комментариях только текст
* Определенные форматы геометок (пользователь может указать геометку, только в том формате что мы определим)
* Максимальное количество комментариев от одного аккаунта для поста - 30
* DAU - 10 000 000
* Несколько клиентов (мобильные устройства, web)
* Данные храним всегда
* Availability - %99.95
* Максимальное количество подписчиков у одного пользователя - 5 000 000 (при достижении лимита увеличивать на 20%)
* Среднее количество запросов на пользователя - 3 на запись 200 на чтение
* Аудитория - СНГ
* Сезонность - Сезон летних отпусков (лето), новогодние каникулы (январь февраль)
* В личных сообщениях можно отправлять только текст
* Максимальное количество символов в личном сообщении - 250
* Через какое максимальное время после создания поста он появляется в лентах? - 20 мин
* Максимальное время доставки сообщения пользователю - 5 сек

<hr>

## Расчет нагрузки

### RPS

``` 
avgRequestsPerDay = 203 
DAU = 10 000 000

RPS = DAU * avgRequestsPerDay / 86400 = 10 000 000 * 203 / 86400 = 23 495
```

### Traffic

```
Traffic = rps * avgRequestSize
```

Рассчитаем средний размер запроса:

Пусть 
* Среднее количество картинок в посте - 1 (100кб)
* Среднее количество символов в посте - 200 (400б)

```
avgRequestSize = 100400 б
```
Тогда
```
Traffic = 23495 * 100400 = 2.3 gb
```

## Одновременные соединения
```
Connections = dau * 0.1

Connections = 10 000 000 * 0.1 = 1 000 000
```



